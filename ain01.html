<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Untuk Ain 💌</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{
      margin:0;padding:0;font-family:'Georgia',serif;background:linear-gradient(135deg,#ffdde1,#ee9ca7);
      color:#4a1c40;overflow-x:hidden;min-height:100vh
    }
    .container{
      max-width:880px;margin:60px auto;background:rgba(255,255,255,.95);padding:42px;border-radius:18px;
      box-shadow:0 10px 28px rgba(0,0,0,.2);position:relative;z-index:2
    }
    h1{margin:0 0 18px;color:#d63384;text-align:center}
    .typing{font-size:1.08rem;line-height:1.9;text-align:justify;margin:16px 0;opacity:0;transform:translateY(16px);transition:all 1s ease}
    .typing.show{opacity:1;transform:translateY(0)}
    .divider{height:1px;background:linear-gradient(90deg,transparent,#f3b1cf,transparent);margin:22px 0}
    .cta{display:flex;gap:10px;justify-content:center;margin-top:10px;flex-wrap:wrap}
    #btnReply{
      padding:12px 22px;border:0;border-radius:10px;background:#d63384;color:#fff;font-weight:700;cursor:pointer;
      opacity:0;transform:scale(.9);transition:all .6s ease
    }
    #btnReply.show{opacity:1;transform:scale(1)}
    .muted{opacity:.6;font-size:.9rem;text-align:center}
    /* Hearts */
    .heart{position:fixed;color:rgba(255,0,90,.28);font-size:18px;animation:floatUp 6.5s linear forwards;pointer-events:none;z-index:1}
    @keyframes floatUp{0%{transform:translateY(100vh) scale(.6);opacity:1}100%{transform:translateY(-10vh) scale(1.2);opacity:0}}
    /* Reply form */
    #replyBox{display:none;margin-top:12px}
    .field{display:flex;flex-direction:column;gap:8px;margin:10px 0}
    input,textarea{
      width:100%;padding:12px;border-radius:10px;border:1px solid #d9c7d1;font-family:inherit;font-size:1rem;resize:none
    }
    #sendReply{
      padding:10px 18px;border:0;border-radius:10px;background:#b3005e;color:#fff;font-weight:700;cursor:pointer
    }
    #savedReply{display:none;margin-top:16px;background:#ffe6f0;padding:14px;border-radius:12px}
    .ok{color:#0b7a43;font-weight:700}
    .err{color:#a7002e;font-weight:700}
    .small{font-size:.88rem;opacity:.75}
  </style>
</head>
<body>
  <div class="container">
    <h1>Untuk Ain 💌</h1>

    <div id="content">
      <!-- ≈500 kata (10 paragraf) -->
      <p class="typing">Ain, izinkan aku menulis ini dengan tenang—pelan, jujur, dan tanpa terburu-buru. Ada banyak hal yang berputar di kepalaku setiap kali namamu muncul, dan rasanya tidak adil jika semua itu hanya kubiarkan menjadi rahasia kecil yang tidak pernah kamu ketahui. Aku ingin kamu membaca ini seperti kita duduk berhadapan, ditemani udara sore yang lembut, sambil membiarkan kata-kata bekerja menggantikan keberanian yang kadang susah kukumpulkan.</p>
      <p class="typing">Sejak pertama kali kita bercakap, ada kesan yang sulit kujelaskan. Bukan kilat yang heboh, bukan juga drama, melainkan ketenangan yang membuatku betah. Kamu hadir seperti pagi yang rapi: tidak memaksa, tidak berisik, namun mengubah suasana menjadi lebih terang. Dari cara kamu tertawa, menanggapi hal kecil, sampai tatapan yang sesekali membuatku lupa baris kalimat—semuanya menyatu jadi alasan kenapa aku menulis ini.</p>
      <p class="typing">Aku mulai menyadari, perhatian itu tumbuh dari hal-hal sederhana. Menanyakan harimu, menunggu ceritamu, atau sekadar melihatmu fokus pada sesuatu yang kamu suka. Di momen-momen itu, aku belajar tentangmu: tentang caramu menghargai orang lain, tentang upayamu yang tenang tapi konsisten. Dan entah sejak kapan, aku mulai menaruh harap agar aku bisa menjadi salah satu hal baik yang kamu rasakan setiap hari.</p>
      <p class="typing">Jujur, aku sering takut. Takut terlihat berlebihan, takut merusak yang sudah nyaman, takut kalau semua ini hanya sepihak. Tapi di saat yang sama, aku juga takut menyesal—takut melewatkan kesempatan untuk mengungkapkan hal yang paling jujur dari diriku. Maka aku memilih menulis. Karena menulis memberiku ruang untuk menata apa yang kusimpan, sekaligus memberimu kebebasan untuk mencerna tanpa aku mendesak jawabanmu.</p>
      <p class="typing">Kalau kamu bertanya seperti apa rasanya, mungkin aku akan menjawab: sederhana tapi dalam. Bukan hal yang meledak-ledak, melainkan sesuatu yang konsisten hadir, tumbuh perlahan, dan semakin jelas. Kamu membuatku ingin menjadi versi diriku yang lebih hangat, lebih sabar, lebih berani mengambil langkah yang baik. Bagiku, itu tanda bahwa perasaan ini bukan sekadar lewat.</p>
      <p class="typing">Aku tidak bisa menjanjikan hidup tanpa lelah, atau hari yang selalu sempurna. Namun aku bisa berjanji untuk mencoba: mendengar ceritamu sampai selesai, mengingat detail-detail kecil yang penting bagimu, menguatkan saat kamu rapuh, dan merayakan saat kamu berhasil. Aku ingin bersikap jujur bila aku salah, dan tetap lembut ketika kita berbeda pandang.</p>
      <p class="typing">Andai suatu hari kita melangkah bersama, aku ingin kita tumbuh tanpa saling menuntut menjadi sempurna. Aku ingin hubungan yang rasional namun tetap manis: saling mengingatkan tanpa merendahkan, saling memberi ruang tanpa menjauh, saling percaya tanpa curiga yang berlebihan. Aku percaya rasa aman adalah wujud paling romantis dari cinta.</p>
      <p class="typing">Ain, membaca ini tidak perlu tergesa. Simpan yang baik, tinggalkan yang tidak nyaman. Aku menulis karena aku menghargaimu, dan karena aku ingin jujur pada diriku sendiri. Apa pun responsmu setelah ini, aku akan menerimanya dengan lapang—yang penting, kamu tahu bahwa ada seseorang yang sungguh-sungguh mendoakan kebaikan untukmu, setiap hari.</p>
      <p class="typing">Jadi, biarkan aku merangkumnya dengan kalimat yang sejak lama ingin kuucapkan dengan mantap: aku suka sama kamu. Bukan karena momen yang dramatis, melainkan karena kamu adalah dirimu—seperti apa adanya, dengan kehangatan yang kamu bawa, dengan kebaikan yang pelan-pelan menenangkan.</p>
      <p class="typing">Terima kasih sudah membaca sampai akhir. Jika kamu berkenan, balaslah pesanku—sedikit saja pun cukup—agar aku tahu ke mana sebaiknya langkah ini kita arahkan. Apa pun jawabannya, aku tetap menghargai kejujuranmu. Dari hati yang tenang, untukmu yang baik. ❤️</p>
    </div>

    <div class="divider"></div>
    <div class="cta">
      <button id="btnReply">Balas pesanku 💌</button>
    </div>

    <div id="replyBox">
      <div class="field">
        <label for="name">Namamu (opsional)</label>
        <input id="name" type="text" placeholder="Ain" />
      </div>
      <div class="field">
        <label for="replyText">Balasanmu</label>
        <textarea id="replyText" placeholder="Tulis jawabanmu di sini..."></textarea>
      </div>
      <button id="sendReply">Kirim</button>
      <p class="small muted">Balasan akan tersimpan di perangkatmu (localStorage) & dikirim aman ke database (Firebase).</p>
    </div>

    <div id="savedReply">
      <p class="ok">✅ Balasanmu tersimpan.</p>
      <div id="replyOutput" class="small"></div>
    </div>

    <p class="muted">— dibuat dengan hati, khusus untuk Ain —</p>
  </div>

  <!-- Hati beterbangan -->
  <script>
    function spawnHeart(){
      const e=document.createElement('div');
      e.className='heart';
      e.textContent='❤';
      e.style.left=Math.random()*100+'vw';
      e.style.fontSize=(14+Math.random()*22)+'px';
      e.style.animationDuration=(5.5+Math.random()*3)+'s';
      document.body.appendChild(e);
      setTimeout(()=>e.remove(),9000);
    }
    setInterval(spawnHeart,420);
  </script>

  <!-- Teks muncul berurutan -->
  <script>
    const paras=[...document.querySelectorAll('.typing')];
    let d=900;
    paras.forEach((p,i)=>{
      setTimeout(()=>{
        p.classList.add('show');
        if(i===paras.length-1){
          setTimeout(()=>document.getElementById('btnReply').classList.add('show'),1200);
        }
      },d);
      d+=2600;
    });

    document.getElementById('btnReply').onclick=()=>document.getElementById('replyBox').style.display='block';
  </script>

  <!-- Firebase (modular v9+) -->
  <script type="module">
    // ====== 1) Inisialisasi Firebase ======
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      // TODO: GANTI DENGAN CONFIG PUNYAMU
      apiKey: "AIzaSyA8DrcvnAxUXxRdzyzeNkvzYbbt53-bftI",
      authDomain: "warentitypro.firebaseapp.com",
      projectId: "warentitypro",
      storageBucket: "warentitypro.appspot.com",
      messagingSenderId: "785147350702",
      appId: "1:785147350702:web:7c5e05255793f7e193a73f"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    // ====== 2) Submit balasan ke Firestore + simpan localStorage ======
    const sendBtn   = document.getElementById('sendReply');
    const nameEl    = document.getElementById('name');
    const textEl    = document.getElementById('replyText');
    const savedWrap = document.getElementById('savedReply');
    const outEl     = document.getElementById('replyOutput');

    // muat balasan tersimpan lokal (kalau ada)
    const local = localStorage.getItem('replyToAin');
    if(local){
      outEl.textContent = local;
      savedWrap.style.display='block';
    }

    sendBtn.addEventListener('click', async ()=>{
      const name = (nameEl.value||'').trim();
      const msg  = (textEl.value||'').trim();
      if(!msg){ alert('Tulis dulu balasanmu ya 💕'); return; }

      sendBtn.disabled = true; sendBtn.textContent = 'Mengirim...';

      try{
        // simpan ke Firestore
        await addDoc(collection(db,'replies'),{
          name: name || null,
          message: msg,
          createdAt: serverTimestamp(),
          userAgent: navigator.userAgent || null
        });

        // simpan juga ke localStorage
        localStorage.setItem('replyToAin', msg);

        outEl.textContent = msg;
        savedWrap.style.display='block';
        document.getElementById('replyBox').style.display='none';
        textEl.value='';
        alert('Terima kasih sudah membalas 💖');
      }catch(err){
        console.error(err);
        alert('Maaf, terjadi error saat menyimpan. Coba lagi ya.');
      }finally{
        sendBtn.disabled = false; sendBtn.textContent = 'Kirim';
      }
    });
  </script>
</body>
</html>
